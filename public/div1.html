<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="div1.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Kanit:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Protest+Guerrilla&family=Protest+Revolution&family=Russo+One&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Goldman:wght@400;700&family=Grenze:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Iceberg&family=Knewave&display=swap" rel="stylesheet">
    
</head>
<body>
    <div class="main">
        <div class="db">
            <form action="" id="mydata">
                <h3>Get <span>My</span> Data</h3>
                <input type="text" id="name" placeholder="Enter your phone" required>
                <select name="" id="option">
                    <option value="Wholesaler">Wholesaler</option>
                    <option value="Farmer">Farmer</option>
                </select>
                <button type="submit">Submit</button>
            </form>
        </div>
    </div>
    <script>
        document.getElementById("mydata").addEventListener("submit", function(event) {
    event.preventDefault();
    submit();
});
async function submit() {
    let x=document.getElementById("name").value;
    let y=document.getElementById("option").value;
    var data = {
    dbs: x,met:y
    };
    if(y==="Wholesaler"){
    fetch('http://localhost:3000/post1',{
                method:'POST',
                headers:{
                    'Content-Type':'application/json'
                },
                body:JSON.stringify(data)
            }).then(response=>{
                if(!response.ok){
                    throw new Error('Failed to submit');
                }
                console.log('data submitted');
                window.location.href='div2.html';
            })
            .catch(err=>{
                console.error("error:",err);
            });
        }else{
            fetch('http://localhost:3000/post1',{
                method:'POST',
                headers:{
                    'Content-Type':'application/json'
                },
                body:JSON.stringify(data)
            }).then(response=>{
                if(!response.ok){
                    throw new Error('Failed to submit');
                }
                console.log('data submitted');
                window.location.href='div.html';
            })
            .catch(err=>{
                console.error("error:",err);
            });
            
        }
}
    </script>
</body>
</html>